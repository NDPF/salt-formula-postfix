applications:
  - postfix
parameters:
  postfix:
    server:
      enabled: true
      myhostname: ${linux:system:name}
      myorigin: ${linux:system:name}.${linux:system:domain}
      mailbox_base: /srv/mail
      admin:
        enabled: true
        encrypt: "md5"
        url: "/admin"
        # Default password is changeme, and this is what you should do
        setup_password: 'dcae0c85ae2ec6ed7922a98d96a4f891:34de2e58483b2e6df1eb984e030ba7a405dfa1d0'
        email: postmaster@${linux:system:domain}
        default_aliases:
          root: root@${linux:system:domain}
          abuse: abuse@${linux:system:domain}
          hostmaster: hostmaster@${linux:system:domain}
          postmaster: postmaster@${linux:system:domain}
          webmaster: webmaster@${linux:system:domain}
        vacation:
          enabled: false
          domain: autoreply.${postfix:server:myorigin}
        footer:
          show_text: true
          text: "Return to webmail"
          link: "https://${postfix:server:myorigin}"
      mysql:
        user: mailserver
        database: mailserver
        password: ${_param:mysql_mailserver_password}
        host: 127.0.0.1
      ssl:
        enabled: true
        key_file: /etc/ssl/private/ssl-cert-snakeoil.key
        cert_file: /etc/ssl/certs/ssl-cert-snakeoil.pem
    relay:
      enabled: false
